box: jekyll/jekyll
build:
  steps:
    - script:
        name: まず GitHub から記事を持ってくるのに必須のツール OpenSSH をインストールするよ
        code: apk --no-cache add openssh-client
    - script:
        name: 続いて GitHub に SSH で繋ぐために必要な秘密鍵の設定とかやるよ
        code: |
          cd ~
          mkdir .ssh
          echo ${PRIVATE_KEY} | sed 's/\\n/\n/g' > .ssh/id_rsa
          chmod 700 .ssh
          chmod 600 .ssh/id_rsa
          git config --global user.name "wercker box by @danmaq (Shuhei Nomura)"
          git config --global user.email "info@danmaq.com"
          ssh-keyscan -H github.com > .ssh/known_hosts
